# История версий

## v2.0.0 - 09.08.2021

> Релиз 2.0.0, стабильная версия, **несовместимые изменения с предыдущей версией**

- **New**: Приложение переписано с применением `metosin/reitit` по концепции 
`interceptors` вместо `middleware`.
- **New**: Добавлены ресурсы API и реализующий их код:
  - `/api/reports/mining-results`
  - `/api/conveyors/hourly-rates`
- **New**: API обвязано `swagger`-схемой, интерактивной документацией 
`swagger-ui` и сопроводительной html-документаций.
- **Delete**: Удалены ресурсы API и реализующий их код:
  - `/api/dumptrucks/reference-list`
  - `/api/dumptrucks/fuel-consumption`
  - `/api/dumptrucks/planned-downtime`
  - `/api/dumptrucks/unplanned-downtime`
  - `/api/dumptrucks/unclassified-downtime`
- **Delete**: Удалены устаревшие тесты.
- **Update**: Переработаны конфигурационные файлы приложения.
- **Update**: Обновлены зависимости проекта до версий:
  - `org.clojure/clojure "1.10.3"`
  - `cprop "0.1.18"`
  - `seancorfield/next.jdbc "1.2.659"`
  - `com.zaxxer/HikariCP "4.0.3"`
  - `http-kit "2.5.3"`
  - `com.taoensso/timbre "5.1.2"`
  - `org.slf4j/slf4j-api "1.7.32"`
  - `com.fzakaria/slf4j-timbre "0.3.21"`
  - `commons-daemon/commons-daemon "1.2.4"`
- **Update**: Обновлены файлы развертывания `staging` и `production` экземпляров 
приложения.

## v1.0.2 - 20.11.2020

> Релиз 1.0.2, стабильная версия

- **Fix**: Исправлен код функции `calc-indicator-group` - функция рассчета
базовых индикторов теперь отрабатывает 1 раз до рассчета групп индикаторов.
- **Update**: Обновлен конфигурационный файл:
  - указаны комментарии;
  - параметры ресурса `/api/mining-results` вынесены в конфигурационный файл из
  исходного кода;
  - журналируемые параметры HTTP-запросов (`ring-logger`) вынесены в 
  конфигурационный файл из исходного кода.
- **Update**: Обновлены зависимости проекта до версий:
  - `cprop "0.1.17"`
  - `seancorfield/next.jdbc "1.1.613"`
  - `com.zaxxer/HikariCP "3.4.5"`
  - `http-kit "2.5.0"`
  - `ring "1.8.2"`
  - `compojure "1.6.2"`
  - `com.taoensso/timbre "5.1.0"`
  - `com.fzakaria/slf4j-timbre "0.3.20"`
  - `commons-daemon/commons-daemon "1.2.3"`
- **Update**: В конфигурацию timbre передается параметр `:min-level` (см. 
changelog к версии timbre 5.1.0)
- **Update**: Обновлены файлы для развертывания `staging` и `production` 
экземпляров приложения версии `v1.0.2`.

## v1.0.1 - 03.11.2020

> Релиз 1.0.1, стабильная версия

- **Update**: Обновлен ресурс `/api/mining-results` - расчет базового показателя 
`ma-overburden` дополнен новым кодом вида работ ВДСК.
- **Update**: Обновлена документация (запрос производственных показателей по
добыче и грузоперевозкам за сутки).
- **Update**: Обновлены файлы для развертывания `staging` и `production` 
экземпляров приложения версии `v1.0.1`.

## v1.0.0 - 21.09.2020

> Релиз 1.0.0, стабильная версия

- **Update**: Обновлены файлы для развертывания `production` экземпляра 
приложения версии `1.0.0`.
- **Fix**: Обновлена и откорректирована документация проекта.

## v1.0.0-RC5 - 24.07.2020

> Кандидат в релиз №5, нестабильная версия

- **New**: Выполнена интеграция с `next.jdbc`, `hugsql`.
- **New**: Добавлены файлы для развертывания `production` экземпляра приложения
версии `v1.0.0-RC4`.
- **Update**: Изменена структура данных ответа на запрос производственных
показателей с иерархической на плоскую, расчет показателей выведен из sql в clj,
обновлена структура файла конфигурации.
- **Update**: Обновлена документация (запрос производственных показателей по
добыче и грузоперевозкам за сутки).
- **Update**: Обновлены файлы для развертывания `staging` экземпляра приложения
версии `v1.0.0-RC5`.

## v1.0.0-RC4 - 26.04.2020

> Кандидат в релиз №4, нестабильная версия

- **New**: Добавлена история версий.
- **Fix**: Исправлен стиль sql-кода запроса производственных показателей по
добыче и грузоперевозкам за сутки.
- **Update**: В расчете сумм плановых и внеплановых простоев учитываются простои
длительностью от 1 минуты.
- **Update**: Удалена документация в форматах `docx` и `pdf` (не востребована).
- **Update**: Обновлена документация (общий вид описания HTTP API, запрос
производственных показателей по добыче и грузоперевозкам за сутки, запрос
плановых простоев самосвалов за месяц, запрос внеплановых простоев самосвалов
за месяц).
- **Update**: Обновлены файлы для развертывания `staging` экземпляра приложения.

## v1.0.0-RC3 - 21.04.2020

> Кандидат в релиз №3, нестабильная версия

- **New**: Добавлен HTTP-ресурс "Отчеты" (планируется для интеграции с UDS
dashboards).
- **Update**: В расчет суммы плановых простоев добавлен учет причины "Отдых".
- **Update**: Обновлена документация (запрос плановых простоев самосвалов за
месяц).
- **Update**: Обновлены файлы для развертывания `staging` экземпляра приложения.

## v1.0.0-RC2 - 25.02.2020

> Кандидат в релиз №2, нестабильная версия

- **New**: Добавлена документация в форматах `docx` и `pdf`.
- **Fix**: Исправлена ошибка `too many redirects` при запросе ресурса `/`.
- **Update**: Из расчета суммы простоев исключены незавершенные простои на
момент запроса.
- **Update**: Обновлены файлы для развертывания `staging` экземпляра приложения.

## v1.0.0-RC1 - 12.01.2020

> Кандидат в релиз №1, нестабильная версия

- **New**: Базовая реализация HTTP API.
